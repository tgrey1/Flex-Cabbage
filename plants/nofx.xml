<?xml version="1.0" encoding="UTF-8"?>
<plant>
<namespace>flexfx</namespace>
<name>FlexFX</name>
<cabbagecode>
</cabbagecode>
<csoundcode>

#include "includes/standards.inc.csd"
#include "includes/synth.inc.csd"
#include "plants/flexfx/pan.inc.csd"

#ifndef SYNTH_OUT_INSTR
  #define SYNTH_OUT_INSTR #FlexSynthOut#
#endif

gkModAmp init 1

alwayson "$SYNTH_OUT_INSTR"

instr $SYNTH_OUT_INSTR
  aSigL chnget "SynthLeft"
  aSigR chnget "SynthRight"
  chnclear "SynthLeft"
  chnclear "SynthRight"

  kGainDb = ampdb(chnget:k("gain"))

  ; apply Pan and gain
  aSigL, aSigR FlexPan aSigL, aSigR
  aSigL *= kGainDb
  aSigR *= kGainDb

  ; apply VCA LFO from synth controls
  aSigL *= a(gkModAmp)
  aSigR *= a(gkModAmp)

  ; clip signal and LED
  aSigL, aSigR FlexClip aSigL, aSigR, "outOL-"

  outs aSigL, aSigR
endin
</csoundcode>
<help>
  This is temporary text... where does this get used?
</help>
</plant>